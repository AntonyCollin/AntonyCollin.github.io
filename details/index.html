<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="icon" type="image/x-icon" href="/images/queebcat.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <title>DÃ©tails</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="/include.js"></script>

    <script>


            GetGameData();

            function GetGameData() {
                $.ajax({
                    url: '../data.json',
                    dataType: 'json',
                    success: function (data) {

                        const urlParams = new URLSearchParams(window.location.search);
                        const getParam = urlParams.get('game');

                        $.each(data, function (index, item) {
                            if (getParam == item.name) {
                                SetData(item);

                            }
                        });
                    }
                });
            }
            function SetData(game) {
                var main = $("main");
    
                main.append(`<h1 class='gameName'>${game.name}</h1>`);

                main.append(`<div class='cont'> </div>`);
                var cont = $(".cont");

                cont.append(`<img class='details-img' src=../${game.img}>`);
                
                if (game.video) {
                    cont.append(`<iframe class='vid' src=${game.video} title='${game.name}-video' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share' allowfullscreen> </iframe>`);
                }
                main.append(`<p class='gameDesc'>${game.desc}</p>`)

                if (game.contributions){
                    main.append(`<h1 class="title"> Mes contributions au projet</h1>`);
                    main.append(`<table class='contributions-grid'> </table>`);
                    
                    var grid = $(".contributions-grid");
                
                $.each(game.contributions, function (index, item) {
                    grid.append(`<tr><th>${item.work} </th></tr> <tr><td>${item.desc}</td> </tr>`);
                });
            }

                if (game.links) {
                    main.append(`<div class='game-links'> </div>`);
                    $.each(game.links, function (index, item) {
                        main.append
                        $(".game-links").append(`<a class='visible-link' target='_blank' href='${item.link}'>${item.text}</a>`)
                    });
                }
            }


    </script>
</head>

<body>
    <header>

    </header>

    <main>

    </main>

    <footer></footer>
</body>

</html>