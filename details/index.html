<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <title>Portfolio</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script>


        $(document).ready(function () {

            $('a').each(function(){
    console.log(window.location.pathname);
    console.log($(this).attr("href"));
        if (        $(this).attr("href") === window.location.pathname)
        {
            $(this).css({"color": "rgb(183, 17, 183)"});
            return false;
        } 

    });

            GetGameData();

            function GetGameData() {
                $.ajax({
                    url: '../data.json',
                    dataType: 'json',
                    success: function (data) {

                        const urlParams = new URLSearchParams(window.location.search);
                        const getParam = urlParams.get('game');

                        $.each(data, function (index, item) {
                            console.log(getParam + " " + item.name);
                            if (getParam == item.name) {
                                SetData(item);

                            }
                        });
                    }
                });
            }
            function SetData(game) {
                var main = $("main");
    
                main.append(`<h1 class='gameName'>${game.name}</h1>`);
                main.append(`<img class='details-img' src=../${game.img}>`);
                main.append(`<p class='gameDesc'>${game.desc}</p>`)
                
                if (game.video) {
                    main.append(`<iframe class='vid' width='560' height='315' src=${game.video} title='${game.name}-video' frameborder='0' allow='accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share' allowfullscreen> </iframe>`);
                }

                if (game.contributions){
                    main.append(`<h1 class="title"> Mes contributions au projet</h1>`);
                    main.append(`<div class='contributions-grid'> </div>`);
                    
                    var grid = $(".contributions-grid");
                
                $.each(game.contributions, function (index, item) {
                    grid.append(`<div>${item.work} </div> <p>${item.desc} </p>`);
                });
            }

                if (game.links) {
                    main.append(`<div class='game-links'> </div>`);
                    $.each(game.links, function (index, item) {
                        main.append
                        $(".game-links").append(`<a class='visible-link' href='${item.link}'>${item.text}</a>`)
                    });
                }
            }

        });



    </script>
</head>

<body>
    <header>
        <span class="name"> Antony Collin-Desrochers</span>
        <nav class="nav-links">
            <a href="/Portfolio/">Portfolio</a>
            <a href="/Portfolio/about/">À propos</a>
        </nav>
    </header>

    <main>

    </main>

    <footer>Site créé par <span>Antony Collin-Desrochers </span></footer>
</body>

</html>